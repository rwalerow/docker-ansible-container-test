---

- name: Install add-apt-repostory
  apt: name=software-properties-common state=latest

- name: Create /opt/jdk directory
  file:
    path: /opt/jdk
    state: directory
    mode: 0755

- name: Download java
  get_url:
    url: http://download.oracle.com/otn-pub/java/jdk/8u121-b13/e9e7ea248e2c4826b92b3f075a80e441/jdk-8u121-linux-x64.tar.gz
    headers: "Cookie: oraclelicense=accept-securebackup-cookie"
    validate_certs: no
    dest: /tmp
    mode: 0440

- name: Open downloaded java
  unarchive:
    src: "/tmp/jdk-8u121-linux-x64.tar.gz"
    dest: "/opt/jdk/"
    copy: no

- name: Set java default java
  alternatives:
    name: java
    link: /usr/bin/java
    path: /opt/jdk/jdk1.8.0_121/bin/java

- name: Set default javac
  alternatives:
    name: javac
    link: /usr/bin/javac
    path: /opt/jdk/jdk1.8.0_121/bin/javac

- name: Delate downloaded java tar.gz
  file:
    path: "/tmp/jdk-8u121-linux-x64.tar.gz"
    state: absent
